{% extends "base.html" %}

{% block title %}
<a class="header-link-home" href="{{ url_for('chat.index') }}">WebChat</a> 
<a class="header-small" href="{{ url_for('chat.view_area', area_id=thread.area) }}">{{ thread.area_name }}</a> 
<a class="header-smaller" href="{{ url_for('chat.view_thread', thread_id=thread.id) }}">{{ thread.title }}</a>
{% endblock %}

{% block content %}
<div class="chat-container">
    <section id="message-list">
        {% for message in thread.messages %}
        <article class="message">
            <header>
                <time>{{ message.sent_time }}</time>
                <strong>{{ message.sender_name }}</strong>
            </header>
            <p>{{ message.text }}</p>
        </article>
        {% else %}
        <p>No messages yet.</p>
        {% endfor %}
    </section>
    <form action="{{ url_for('chat.view_thread', thread_id=thread.id) }}" method="post" id="message-form">
        <textarea name="message" rows="5" required></textarea>
        <button type="submit">Send</button>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        var messageList = document.getElementById("message-list");
        messageList.scrollTop = messageList.scrollHeight;
    });
</script>
{% endblock %}
